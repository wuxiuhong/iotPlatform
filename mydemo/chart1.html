<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/echarts.js"></script>
    <style>
        body {
            background-color: #292c4a;
            color: rgb(24, 174, 156);

        }
        #mainChart {
            width: 100%;
            min-height: 300px;
        }

        em {
            font-size: 12px;
            color: red;
        }
    </style>
</head>
<body>

<div id="mainChart"></div>

</body>
</html>

<script src="js/jquery-3.3.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>

    var self = {
        ctx: {
            $: $,
            echarts: echarts
        }
    };

    self.data = {
        da: {},
        option: {},
        a: 1
    };

    self.onInit = function () {
        self.data.option = {
            tooltip: {
                formatter: "{a} <br/>{b} : {c}%"
            },
            series: [
                {
                    name: '业务指标',
                    type: 'gauge',
                    startAngle: 210,
                    endAngle: -30,
                    data: [{value: 50, name: '磨损百分比'}],
                    min: 0,
                    max: 100,
                    splitNumber: 2,
                    radius: '80%',
                    axisLine: {
                        lineStyle: {
                            "width": 10,
                            color: [
                                [0.6, '#01C6FD'],
                                [0.8, '#EAB62A'],
                                [1, '#E04F23']
                            ]
                        }
                    },
                    axisTick: {show: false},
                    splitLine: {
                        length: 10,
                        lineStyle: {
                            color: 'auto'
                        },
                        show: false
                    },
                    pointer: {
                        width: 3
                    },
                    title: {
                        offsetCenter: [0, '30%'],
                    },
                    axisLabel: {},
                    detail: {
                        fontWeight: 'normal',

                        color: 'rgba(49, 178, 231,1)',
                        offsetCenter: ["0%", "80%"],
                        formatter: function (value) {
                            return "{a|" + value + "}" + "{b|%}";
                        },
                        rich: {
                            a: {
                                fontSize: 44
                            },
                            b: {
                                fontSize: 22,
                                padding: 5,
                                verticalAlign: 'bottom'
                            }
                        }
                    }
                }
            ]
        };
        var myChart = self.ctx.echarts.init(document.getElementById('mainChart'));
        setInterval(function () {
            self.data.option.series[0].data[0].value = self.getData();
            myChart.setOption(self.data.option, true);
        }, 500);
    };

    self.onDataUpdated = function (data) {
        self.ctx.$.each(data, function (i, obj) {
            eval("self.data.da." + obj.k.o + "='" + obj.v + "'");
        });
        self.data.option.series[0].data[0].value = self.data.da.tool_wear_ratio;
    };

    self.onResize = function () {
        self.onInit();
    };

    self.onDestroy = function () {
        console.log("销毁")
    };

    self.getData = function () {
        if (self.data.a < 0) {
            self.data.a = 1;
        }
        var result = ((1 - self.data.a) * 100).toFixed(0);
        self.data.a = self.data.a - 0.02;
        return result;
    };

    self.onInit();

</script>